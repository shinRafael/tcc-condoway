Preciso implementar o fluxo de "Esqueci minha senha" no backend. O frontend já está pronto e faz chamadas para os endpoints abaixo. A tabela usuarios já possui os campos user_reset_token (VARCHAR) e user_reset_expires (DATETIME) que devem ser usados. Aqui está o que precisa ser feito:

ENDPOINT 1 - POST /usuario/recuperar-senha
Body recebido: { "email": "usuario@exemplo.com" }
Lógica: (1) Verificar se o email existe na tabela usuarios, se não existir retornar erro 404 com { "mensagem": "Email não encontrado." }. (2) Gerar um código aleatório de 6 dígitos numéricos (ex: Math.floor(100000 + Math.random() * 900000).toString()). (3) Definir data de expiração para 15 minutos a partir de agora (new Date(Date.now() + 15 * 60 * 1000)). (4) Executar UPDATE usuarios SET user_reset_token = ?, user_reset_expires = ? WHERE user_email = ? passando o código, data de expiração e email. (5) Enviar email para o usuário contendo o código de verificação (configurar Nodemailer ou serviço similar). (6) Retornar sucesso 200 com { "mensagem": "Código de verificação enviado para seu email!" }. Em caso de erro interno retornar 500 com { "mensagem": "Erro ao processar solicitação." }.

ENDPOINT 2 - POST /usuario/redefinir-senha
Body recebido: { "email": "usuario@exemplo.com", "codigo": "123456", "novaSenha": "NovaSenha123" }
Lógica: (1) Buscar o usuário na tabela usuarios pelo user_email, se não existir retornar erro 404 com { "mensagem": "Email não encontrado." }. (2) Comparar o campo user_reset_token do banco com o codigo recebido, se não for igual retornar erro 400 com { "mensagem": "Código inválido." }. (3) Verificar se a data/hora atual é maior que user_reset_expires do banco, se expirou retornar erro 400 com { "mensagem": "Código expirado. Solicite um novo." }. (4) Fazer hash da novaSenha usando bcrypt com salt 10 (const senhaHash = await bcrypt.hash(novaSenha, 10)). (5) Executar UPDATE usuarios SET user_senha = ?, user_reset_token = NULL, user_reset_expires = NULL WHERE user_email = ? passando o hash da senha e o email (isso atualiza a senha e limpa o token usado). (6) Retornar sucesso 200 com { "mensagem": "Senha redefinida com sucesso!" }. Em caso de erro interno retornar 500 com { "mensagem": "Erro ao redefinir senha." }.

IMPORTANTE: Instalar bcrypt se não tiver (npm install bcrypt). Configurar Nodemailer para envio de email no endpoint de recuperação (exemplo: usar Gmail SMTP com nodemailer.createTransport). Os campos user_reset_token e user_reset_expires já existem na tabela usuarios e devem ser usados. Após redefinir a senha com sucesso, os campos user_reset_token e user_reset_expires devem ser limpos (setados como NULL) para invalidar o código. O frontend espera exatamente essas mensagens de erro/sucesso no campo "mensagem" da resposta JSON.